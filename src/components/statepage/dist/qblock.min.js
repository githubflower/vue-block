"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _util=_interopRequireDefault(require("./util.js")),_graphCfg=require("./graphCfg.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var LINE_H=_graphCfg.lineCfg.line_h,LINE_RADIUS=_graphCfg.lineCfg.line_radius,QBlock={store:window.store,Thread:{},State:{getXY2Canvas:function(t,e){var n=document.getElementsByClassName("thread")[e].getBoundingClientRect(),a=_util.default.getDomByStateId(t.stateId).getBoundingClientRect();return{x:a.left-n.left,y:a.top-n.top}},getStateHeight:function(t){return _util.default.translatePX2Num(t.height)},getStateHeightByStateId:function(t,e){var n=store.getState(t,e,!1);return _util.default.translatePX2Num(n.height)},getStateWidth:function(t){return _util.default.translatePX2Num(t.width)}},Line:{getStartPoint:function(t,e){var n=store.getState(e,t.startState.stateId,!1),a=QBlock.State.getXY2Canvas(n,e);return t.startPoint={x:a.x+_util.default.translatePX2Num(n.width),y:a.y+_util.default.translatePX2Num(n.height)/2},t.startPoint},getEndPoint:function(t,e){var n=store.getState(e,t.endState.stateId,!1),a=QBlock.State.getXY2Canvas(n,e);return t.endPoint={x:a.x,y:a.y+_util.default.translatePX2Num(n.height)/2},t.endPoint},redrawLine:function(t,e){this.drawLine(t,t.startState,t.endState,e)},drawLine:function(t,e,n,a){var i,r,d,o,u=LINE_RADIUS;return i=QBlock.Line.getStartPoint(t,a),r=QBlock.Line.getEndPoint(t,a),d=Math.max(QBlock.State.getStateHeightByStateId(a,e.stateId)/2,QBlock.State.getStateHeightByStateId(a,n.stateId)/2),r.x>i.x+LINE_H+LINE_RADIUS&&r.y==i.y?(o=this.drawStraightConnectLine(i,r,LINE_RADIUS),t.endPoint=r,t.d=o,t):r.x-LINE_H-LINE_RADIUS<i.x&&r.y<i.y||r.x<i.x&&r.y==i.y?(o=this.drawUpperBackConnectLine(i,r,LINE_RADIUS,d),t.endPoint=r,t.d=o,t):r.x-LINE_H-LINE_RADIUS<i.x&&r.y>i.y?(o=this.drawLowerBackConnectLine(i,r,LINE_RADIUS,d),t.endPoint=r,t.d=o,t):r.x>i.x+LINE_H+LINE_RADIUS&&r.y>i.y?(o=r.y-i.y<2*u?(u=(r.y-i.y)/2,this.drawLowerConnectLine(i,r,u)):this.drawLowerConnectLine(i,r,LINE_RADIUS),t.endPoint=r,t.d=o,t):r.x>i.x+LINE_H+LINE_RADIUS&&r.y<i.y?(o=i.y-r.y<2*u?(u=(i.y-r.y)/2,this.drawUpperConnectLine(i,r,u)):this.drawUpperConnectLine(i,r,LINE_RADIUS),t.endPoint=r,t.d=o,t):void 0}}},_default=QBlock;exports.default=_default;
//# sourceMappingURL=qblock.min.js.map
