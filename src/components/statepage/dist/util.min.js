"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var NAME_SPACE="https://developers.google.com/blockly/xml",Util={createEl:function(t){return document.createElementNS(NAME_SPACE,t)},createFieldDom:function(t){var e=this.createEl("field");return e.setAttribute("name",t.name),t.id&&e.setAttribute("id",t.id),e.textContent=t.value,e},createCommentDom:function(t){var e=this.createEl("comment");return e.setAttribute("pinned",t.pinned||!1),e.textContent=t.value,e},createStateDefBlock:function(t){var e=this.createEl("block");e.setAttribute("type","state_def"),e.setAttribute("id",t.stateId);var r=this.createFieldDom({name:"NAME",value:t.name});return e.appendChild(r),e},createNextStatesDom:function(t,i){var e,l,o=this;if(t.outputAry.length){if(e=this.createEl("next"),(l=this.createEl("block")).setAttribute("type","controls_if"),1<t.outputAry.length){var r=this.createEl("mutation");r.setAttribute("elseif",t.outputAry.length-1),l.appendChild(r)}t.outputAry.forEach(function(e,t){var r;(r=o.createEl("statement")).setAttribute("name","DO".concat(t)),r.setAttribute("id","".concat(e.lineId));var n=i.lineAry.find(function(t){return t.lineId===e.lineId});if(n){var a=i.stateAry.find(function(t){return t.stateId===n.endState.stateId});a?r.appendChild(Util.state2dom(a,i)):console.error("data error -^- ")}r&&l.appendChild(r)}),e.appendChild(l)}return e},createNextStatesDom2:function(t,o){var d,s,u,c=this;t.outputAry.length&&t.outputAry.forEach(function(e,t){var r,n=c.createEl("next");s=s||n,(d=c.createEl("block")).setAttribute("type","state_trigger_event"),d.setAttribute("id",e.lineId),(r=c.createEl("statement")).setAttribute("name","DO0");var a=o.lineAry.find(function(t){return t.lineId===e.lineId});if(a){if(a.desc){var i=c.createCommentDom({value:a.desc});d.appendChild(i)}var l=o.stateAry.find(function(t){return t.stateId===a.endState.stateId});l?r.appendChild(Util.state2dom(l,o)):console.error("data error -^- ")}r&&d.appendChild(r),n.appendChild(d),u&&u.appendChild(n),u=d});return s},genBlockType:function(t){var e="state_opr";return"loopDiv"===t&&(e="controls_whileUntil"),e},state2dom:function(t,e){var r=this.createEl("block");console.log(t.stateId+" --- "+t.name+" --- "+t.stateType),r.setAttribute("id",t.stateId),r.setAttribute("type",this.genBlockType(t.stateType));var n=this.createFieldDom({id:t.stateId,name:"field_state",value:t.name});r.appendChild(n);var a=this.createNextStatesDom2(t,e);return a&&r.appendChild(a),r}},_default=Util;exports.default=_default;
//# sourceMappingURL=util.min.js.map
