{"version":3,"sources":["main.js"],"names":["Vue","use","Element","size","zIndex","prototype","axios","config","productionTip","window","stateManage","genId","_id","type","Date","STATE_NAME_POOL","store","debug","statenameIndex","stateData","threadAry","name","width","height","stateAry","lineAry","addThread","obj","push","getDefaultStateCfg","data","stateType","stateId","inputAry","outputAry","parent","mode","x","y","children","addState","state","index","addLine","threadIndex","lineData","relateLine2startState","relateLine2endState","deleteLine","lineItem","line","i","length","lineId","splice","traverseLine","lineState","result","startState","pop","forEach","item","endState","traverse","stateIndex","resizeThread","dh","dw","getState","threadIdOrIndex","isThreadId","thread","find","id","getStateImplement","console","error","router","beforeEach","to","from","next","log","EventObj","el","components","App","template"],"mappings":"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","sourcesContent":["// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\nimport Element from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nimport axios from 'axios';\r\n\r\nVue.use(Element, { size: 'small', zIndex: 3000 });\r\nVue.prototype.axios = axios;\r\n\r\nVue.config.productionTip = false\r\n\r\nwindow.stateManage = {};//状态管理  后续采用vuex实现 TODO\r\nwindow.genId = (function () {\r\n  var _id = 0;\r\n  return function (type) {\r\n    return type + '-' + +new Date();//+ ++_id\r\n  }\r\n})();\r\nconst STATE_NAME_POOL = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"];\r\nwindow.store = {\r\n  debug: true,\r\n  statenameIndex: 0,\r\n  stateData: {\r\n    threadAry: [\r\n      {\r\n        name: \"Main_thread\",\r\n        width: 1200,\r\n        height: 500,\r\n        stateAry: [],\r\n        lineAry: [],\r\n      },\r\n    ],\r\n  },\r\n  addThread(obj) {\r\n    this.stateData.threadAry.push(obj);\r\n  },\r\n  /**\r\n  * 获取状态组件的默认配置\r\n  * @param {index: this.threadIndex, x: e.x - threadPosInfo.x, y: e.y - threadPosInfo.y, stateType: e.dataTransfer.getData(\"stateType\")} data\r\n  */\r\n  getDefaultStateCfg(data) {\r\n    return {\r\n      width: data.stateType === \"loopDiv\" ? \"300px\" : \"76px\",\r\n      height: data.stateType === \"loopDiv\" ? \"120px\" : \"40px\",\r\n      // name: \"状态描述\" + this.statenameIndex++,\r\n      name: STATE_NAME_POOL[this.statenameIndex++],\r\n      stateType: data.stateType,\r\n      stateId: window.genId(\"state\"),\r\n      inputAry: [],\r\n      outputAry: [],\r\n      parent: null,\r\n      mode:'normal',\r\n      x: data.x,\r\n      y: data.y,\r\n      children:[],\r\n    }\r\n  },\r\n  addState(data) {\r\n    let state = this.getDefaultStateCfg(data);\r\n    this.stateData.threadAry[data.index].stateAry.push(state);\r\n  },\r\n  /**\r\n   * 在线程框内增加连线\r\n   * @param { threadIndex, lineData }data\r\n   */\r\n  addLine(data) {\r\n    this.stateData.threadAry[data.threadIndex].lineAry.push(data.lineData);\r\n    //将连线数据添加到首尾2个状态块\r\n    this.relateLine2startState(data);\r\n    this.relateLine2endState(data);\r\n  },\r\n  /**\r\n   * 删除连线 \r\n   * 参数：连线id， 线程索引（TODO:后续考虑修改为线程id）\r\n   * @param {lineId, threadIndex} data\r\n   */\r\n  deleteLine(data) {\r\n    let lineAry = this.stateData.threadAry[data.threadIndex].lineAry,\r\n      lineItem,\r\n      line,\r\n      i;\r\n    for (i = 0; i < lineAry.length; i++) {\r\n      lineItem = lineAry[i];\r\n      if (lineItem.lineId === data.lineId) {\r\n        line = lineAry.splice(i, 1)[0];\r\n        break;\r\n      }\r\n    }\r\n    //修改为深度搜索与选中连线相关的状态\r\n    function traverseLine(stateAry, lineState) {\r\n      for (var i in stateAry){\r\n          if (stateAry[i].stateId === lineState.stateId){\r\n          result.push(stateAry[i]);\r\n          return\r\n          }\r\n        traverseLine(stateAry[i].children, lineState);\r\n      } \r\n    };\r\n    let result = [];\r\n    //更新这条线的始末状态的outputAry inputAry信息\r\n    let stateAry = this.stateData.threadAry[data.threadIndex].stateAry;\r\n    traverseLine(stateAry, line.startState)\r\n    let startState = result.pop()\r\n    let outputAry = startState.outputAry;\r\n    outputAry.forEach((item, index) => {\r\n      if (item.lineId === line.lineId) {\r\n        outputAry.splice(index, 1);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    traverseLine(stateAry, line.endState)\r\n    let endState = result.pop()\r\n    let inputAry = endState.inputAry;\r\n    inputAry.forEach((item, index) => {\r\n      if (item.lineId === line.lineId) {\r\n        inputAry.splice(index, 1);\r\n        return false;\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 将连线数据和连线的首尾2个状态关联\r\n   * @param  { threadIndex, lineData }data\r\n   */\r\n\r\n  relateLine2startState(data) {\r\n    let result = []\r\n    // 用于深度搜索stateId的方法，寻找到的state存储在result内\r\n    function traverse(stateAry) {\r\n      for (var i in stateAry){\r\n        if (stateAry[i].stateId === data.lineData.startState.stateId){\r\n          result.push(stateAry[i]);\r\n          return\r\n        }\r\n        traverse(stateAry[i].children);\r\n      }\r\n    };\r\n\r\n    if (data.lineData.startState) {\r\n      traverse(this.stateData.threadAry[data.threadIndex].stateAry)\r\n      let outputAry = result[0].outputAry;\r\n      if (!outputAry) {\r\n        outputAry = [];\r\n        result[0].outputAry = outputAry;\r\n      }\r\n      outputAry.push({\r\n        lineId: data.lineData.lineId, //这里只存放连线的lineId，对连线的具体数据只保存一份，放在thread.lineAry里面，避免维护多份数据\r\n      });\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   * \r\n   * \r\n   */\r\n  relateLine2endState(data) {\r\n    if (\r\n      data.lineData.endState &&\r\n      data.lineData.endState.stateIndex !== null\r\n    ) {\r\n      // 根据id来拿\r\n      let result = []\r\n      // 用于深度搜索stateId的方法，寻找到的state存储在result内\r\n      function traverse(stateAry) {\r\n        for (var i in stateAry){\r\n          if (stateAry[i].stateId === data.lineData.endState.stateId){\r\n            result.push(stateAry[i]);\r\n            return\r\n          }\r\n          traverse(stateAry[i].children);\r\n        }\r\n      };\r\n      traverse(this.stateData.threadAry[data.threadIndex].stateAry)\r\n      let inputAry = result[0].inputAry;\r\n      \r\n      if (!inputAry) {\r\n        inputAry = [];\r\n        result[0].inputAry = inputAry;\r\n      }\r\n      inputAry.push({\r\n        lineId: data.lineData.lineId,\r\n      });\r\n    }\r\n  },\r\n  /**\r\n   * 调整线程框的宽高\r\n   * @param {dw, dh} data \r\n   */\r\n  resizeThread(data) {\r\n    if (data.dh) {\r\n      this.stateData.threadAry[data.threadIndex].height += data.dh;\r\n    }\r\n    if (data.dw) {\r\n      this.stateData.threadAry[data.threadIndex].width += data.dw;\r\n    }\r\n  },\r\n  /**\r\n   * 根据传入的线程id/index + 状态id获取状态\r\n   * @param {*} threadIdOrIndex\r\n   * @param {*} stateId \r\n   * @param {*} isThreadId 是否是线程id\r\n   */\r\n  getState(threadIdOrIndex, stateId, isThreadId){\r\n    let state;\r\n    let thread;\r\n    if (isThreadId){\r\n      thread = this.stateData.threadAry.find(item => {\r\n        return item.id === threadIdOrIndex;\r\n      });\r\n    }else{\r\n      thread = this.stateData.threadAry[threadIdOrIndex];\r\n    }\r\n    if (thread){\r\n      state = this.getStateImplement(stateId, thread.stateAry);\r\n    }\r\n    if(!state){\r\n      console.error('根据threadIdOrIndex和stateId获取状态失败---> threadId: ' + threadIdOrIndex + ' stateId: ' + stateId + ' isThreadId: ' + isThreadId);\r\n    }\r\n    return state;\r\n  },\r\n  getStateImplement(stateId, stateAry){\r\n    let state;\r\n    stateAry.forEach(item => {\r\n      if (item.stateId === stateId) {\r\n        state = item;\r\n        return false;\r\n      } else if (item.children && item.children.length) {\r\n        state = this.getStateImplement(stateId, item.children);\r\n      }\r\n    });\r\n    return state;\r\n  }\r\n}\r\n\r\nrouter.beforeEach((to, from, next)=>{\r\n  console.log(to);\r\n  if ((from.name === 'blockly' && to.name === 'state') || (to.name === 'blockly' && from.name === 'state')){\r\n    console.log('同步数据... '); //TODO\r\n  }\r\n  next();\r\n})\r\n/* eslint-disable no-new */\r\nwindow.EventObj = new Vue();\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n"],"file":"main.dev.js"}